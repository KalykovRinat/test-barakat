const menu = {
  "–°–≤–µ–∂–µ—Å—Ç—å": 190,
  "–°–≤–µ–∂–µ—Å—Ç—å –ø–æ –∫–∏—Ç–∞–π—Å–∫–∏–π": 190,
  "–®–∞–∫–∞—Ä–∞–ø": 185,
  "–ì–Ω–µ–∑–¥–æ": 265,
  "–û—Å—Ç—Ä–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ": 290,
  "–•—Ä—É—Å—Ç—è—à–∏–µ –±–∞–∫–ª–∞–∂–∞–Ω—ã": 290,
  "–°–∞–ª–∞—Ç –≥—Ä–µ—á–µ—Å–∫–∏–π": 230,
  "–°–∞–ª–∞—Ç —Ü–µ–∑–∞—Ä—å": 300,
  "–û–ª–∏–≤—å–µ": 230,
  "–Ø–∑—ã–∫ –¥—Ä–∞–∫–æ–Ω–∞": 310,
  "–õ—è–Ω —Ñ—É": 160,
  "–ö–∞–ø—É—Å—Ç–∞ –ø–æ –∫–æ—Ä–µ–π—Å–∫–∏–π": 140,
  "–°–∞–ª–∞—Ç –∫–∏–º—á–∏": 140,
  "–ú–æ—Ä–æ–≤—á–∞ –ø–æ –∫–æ—Ä–µ–π—Å–∫–∏–π": 120,
  "–°–µ—Ç –∏–∑ —Ç—Ä–µ—Ö —Å–∞–ª–∞—Ç–æ–≤": 200,
  "–õ–∞–≥–º–∞–Ω –ø–æ —É–∑–±–µ–∫—Å–∫–∏–π": 255,
  "–®–æ—Ä–ø–æ –∏–∑ –±–∞—Ä–∞–Ω–∏–Ω—ã": 345,
  "–®–æ—Ä–ø–æ –ø–æ –∫–∞–∑–∞—Ö—Å–∫–∏": 230,
  "–ß—É—á–≤–∞—Ä–∞": 230,
  "–ú–∞—Å—Ç–∞–≤–∞": 255,
  "–°—É–ø —Å —Ñ—Ä–∏–∫–∞–¥–µ–ª—å–∫–∞–º–∏": 255,
  "–°—É–ø —Å —Ñ—Ä–∏–∫–∞–¥–µ–ª—å–∫–∞–º–∏ –ø–æ –∫–∏—Ç–∞–π—Å–∫–∏–π": 255,
  "–ü–µ–ª—å–º–µ–Ω–∏": 210,
  "–°–æ–ª—è–Ω–∫–∞": 335,
  "–ë–æ—Ä—â –∫—Ä–∞—Å–Ω—ã–π": 210,
  "–°—É–ø —Å –≥—Ä–∏–±–∞–º–∏": 255,
  "–†–∞–º–µ–Ω": 310,
  "–¢–æ–º —è–Ω —Å –∫—É—Ä–∏—Ü–µ–π": 400,
  "–¢–æ–º —è–Ω —Å –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏": 460,
  "–ö–∏–º—á–∏": 350,
  "–°–∞–Ω—Ç–∞–≤—Ä–æ": 370,
  "–ü–ª–æ–≤ –ø–æ —á–∞–π—Ö–∞–Ω—Å–∫–∏–π": 245,
  "–ü–ª–æ–≤ —Å–∞–º–∞—Ä–∫–∞–Ω—Å–∫–∏–π": 255,
  "–°–∞–º—Å—ã —Ç–∞—à–∫–µ—Å–∫–∞—è": 100,
  "–ú–∞–Ω—Ç—ã": 255,
  "–ú–∞–Ω—Ç—ã –∂–∞—Ä–µ–Ω–Ω—ã–∫": 265,
  "–î–∞–ø–∞–Ω–¥–∂–∏ —Å —Ä–∏—Å–æ–º": 335,
  "–î–∞–ø–∞–Ω–¥–∂–∏ —Å —Ç–µ—Å—Ç–æ–º": 335,
  "–ö—É—É—Ä–¥–∞–∫": 520,
  "–ö–∞—Ä–∞ –∫—É—É—Ä–¥–∞–∫": 635,
  "–ê–∑—É –ø–æ —Ç–∞—Ç–∞—Ä—Å–∫–∏–π": 370,
  "–ö–∞—Ä—ã–Ω —Å—è–π": 310,
  "–ö—É—Ä–∏—Ü–∞ —Å –æ–≤–æ—à—è–º–∏ –∏ —Ä–∏—Å–æ–º": 370,
  "–ù–∞–≥–µ—Ç—Å—ã –≤ –∫–∏—Å–ª–æ —Å–ª–∞–¥–∫–æ–º —Å–æ—É—Å–µ": 345,
  "–ö—É—Ä–∏—Ü–∞ –∂–∞—Ä–µ–Ω–Ω–∞—è —Å –∞—Ä–∞—Ö–∏—Å–æ–º": 460,
  "–ú—è—Å–æ –ø–æ –∫–∏—Ç–∞–π—Å–∫–∏–π —Å —Ä–∏—Å–æ–º": 405,
  "–ë–æ—Å–æ –ª–∞–≥–º–∞–Ω": 310,
  "–ì—é—Ä—É –ª–∞–≥–º–∞–Ω": 310,
  "–ì–∞–Ω—Ñ–∞–Ω": 310,
  "–ü–µ–ª—å–º–µ–Ω–∏ –∑–∞–ø–µ—á–µ–Ω–Ω—ã–π": 310,
  "–ñ–∞—Ä–µ–Ω–Ω—ã–µ –ø–µ–ª—å–º–µ–Ω–∏": 245,
  "–ö–æ—Ç–ª–µ—Ç–∞": 115,
  "–§—Ä–∏–∫–∞—Å–µ —Å –∫—É—Ä–∏—Ü–µ–π": 290,
  "–ë—Ä–∏–∑–æ–ª—å": 230,
  "–ë–∏—Ñ—à—Ç–µ–∫—Å —Å –≥–ª–∞–∑—É—Ä—å—é": 195,
  "–°–æ—Å–∏—Å–∫–∏ –∂–∞—Ä–µ–Ω–Ω–∞—è": 60,
  "–ú—è—Å–æ –ø–æ —Ñ—Ä–∞–Ω—Ü—É—Å–∫–∏ –≤ –≥–æ—Ä—à–æ—á–∫–µ": 335
};

const dishSelect = document.getElementById("dish-select");
const dishQuantity = document.getElementById("dish-quantity");
const addDishBtn = document.getElementById("add-dish");
const orderList = document.getElementById("order-list");
const totalPriceEl = document.getElementById("total-price");

const order = [];

for (const dish in menu) {
  const option = document.createElement("option");
  option.value = dish;
  option.textContent = `${dish} (${menu[dish]} —Å.)`;
  dishSelect.appendChild(option);
}

addDishBtn.addEventListener("click", () => {
  const dish = dishSelect.value;
  const quantity = parseInt(dishQuantity.value);
  if (!dish || quantity < 1) return;
  order.push({ dish, quantity });
  renderOrder();
});

function renderOrder() {
  orderList.innerHTML = "";
  let total = 0;
  order.forEach(({ dish, quantity }) => {
    const price = menu[dish] * quantity;
    total += price;
    const li = document.createElement("li");
    li.textContent = `${dish} ‚Äî ${quantity} —à—Ç. = ${price} —Å.`;
    orderList.appendChild(li);
  });
  totalPriceEl.textContent = total;
}

document.getElementById("delivery-form").addEventListener("submit", async function (e) {
  e.preventDefault();

  const name = this.name.value;
  const phone = this.phone.value;
  const address = this.address.value;
  const fileInput = this.querySelector('input[type="file"]');
  const file = fileInput.files[0];

  let orderText = "";
  let total = 0;
  order.forEach(({ dish, quantity }) => {
    const price = menu[dish];
    const itemTotal = price * quantity;
    total += itemTotal;
    orderText += `üçΩ ${dish}: ${quantity} —à—Ç. = ${itemTotal} —Å.\n`;
  });

  const message = `üì¶ –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!
üë§ –ò–º—è: ${name}
üì± –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}
üìç –ê–¥—Ä–µ—Å: ${address}

${orderText}
üí∞ –û–±—â–∞—è —Å—É–º–º–∞: ${total} —Å.`;

  const token = "7497600082:AAGOmVf0X2omtOEsbeqaa5-cEHSpE75lZpc";
  const chat_id = "-1002657322598";

  await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ chat_id, text: message })
  });

  if (file) {
    const formData = new FormData();
    formData.append("chat_id", chat_id);
    formData.append("document", file);
    await fetch(`https://api.telegram.org/bot${token}/sendDocument`, {
      method: "POST",
      body: formData
    });
  }

  alert("–ó–∞–∫–∞–∑ –∏ —Ñ–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!");
  this.reset();
  order.length = 0;
  renderOrder();
});
function renderOrder() {
  orderList.innerHTML = "";
  let total = 0;

  order.forEach(({ dish, quantity }, index) => {
    const price = menu[dish] * quantity;
    total += price;
    const li = document.createElement("li");
    li.innerHTML = `
      ${dish} ‚Äî ${quantity} —à—Ç. = ${price} —Å.
      <button class="remove-btn" onclick="removeDish(${index})">–£–¥–∞–ª–∏—Ç—å</button>
    `;
    orderList.appendChild(li);
  });

  totalPriceEl.textContent = total;
}

function removeDish(index) {
  order.splice(index, 1);
  renderOrder();
}


  const removeButtons = document.querySelectorAll(".remove-btn");
  removeButtons.forEach(button => {
    button.addEventListener("click", () => {
      const index = button.dataset.index;
      order.splice(index, 1);
      renderOrder();
    });
  });

